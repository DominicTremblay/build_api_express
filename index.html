<!DOCTYPE HTML>
<!--
	Dopetrope by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html lang="en">

<head>
	<title>Masterclass - Build an API with Express/Prisma</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js"></script>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism.min.css">

	<link rel="stylesheet" href="assets/css/main.css" />
</head>

<body class="left-sidebar is-preload">
	<div id="page-wrapper">

		<!-- Header -->
		<section id="header">

			<!-- Logo -->
			<h1>Masterclass Series</h1>
			<h2>Building an API with Express/Prisma</h2>
		</section>

		<!-- Main -->
		<section id="main">
			<div class="container">
				<div class="row">
					<div class="col-4 col-12-medium">




						<!-- Sidebar -->

						<section class="box">
							<header>
								<h3>Quick Links</h3>
							</header>
							<p>Veroeros sed amet blandit consequat veroeros lorem blandit adipiscing et feugiat sed lorem consequat
								feugiat lorem dolore.</p>
							<ul class="divided">
								<li><a href="#">Github repo</a></li>
								<li><a href="#">Setup instructions if you start from sratch</a></li>
								<li><a href="#">Part 1: Setup and Requirements</a></li>
								<li><a href="#">Part 2: Working With Prisma</a></li>
								<li><a href="#">Part 3: </a></li>
							</ul>
							<footer>

							</footer>
						</section>


						<section class="box">
							<a href="#" class="image featured"><img src="images/dominic_tremblay_web_instructor.png"
									alt="Dominic Tremblay - Web Instructor" /></a>
							<header>
								<h3>Meet Your Instructor</h3>
								<p>
								<h4>Hi, I'm Dom, Instructor Manager at Lighthouse Labs</h4>
								</p>

							</header>
							<p>With more than 15 years of industry experience, I've cultivated a strong passion for education, and my
								ultimate goal is to help you expand your skills and have the best possible career.</p>
							<footer>

							</footer>
						</section>


					</div>
					<div class="col-8 col-12-medium imp-medium">

						<!-- Content -->
						<article class="box post">
							<a href="#" class="image featured"><img src="images/pic01.png" alt="server-prisma-database" /></a>
							<header>
								<h2>Welcome to the Masterclass</h2>
								<h4>Elevate your skills and create a professional Web API</h4>
							</header>
							<p>
								Join our immersive workshop and empower yourself with the knowledge and expertise to build a
								cutting-edge Web API. Here's what you'll gain:
							</p>

							<p>üöÄ <b>Skill Enhancement:</b> Acquire the skills to design, develop, a robust Web API </p>

							<p>üåê <b>Hands-On Experience:</b> This isn't just theory. You'll apply your knowledge
								immediately by diving into
								hands-on exercises to create a practical, real-world project. This project will stand out in your
								portfolio as it demonstrates your skill in Web API development.</p>

							<p>üß∞ <b>Tool Mastery:</b> Explore the latest tools and technologies to streamline your API
								development process
								with modern tools: Node/Express, Typescript and Prisma.</p>
							<section>

								<header>
									<ul class="dates">
										<li>
											<span class="date">Part <b>1.</b></span>
											<h2>Setup and Requirements</h2>
										</li>
									</ul>
								</header>


								<h3>1. Requirements</h3>

								<p>

									In this workshop, you need to be familiar with Node.js/Express.js, and we'll be using the following
									toolset:

								<ul>
									<li>Node v16</li>
									<li>Postgresql v12</li>
									<li>VS Code</li>
									<li><a href="https://marketplace.visualstudio.com/items?itemName=Prisma.prisma">VS Code Prisma
											Extension</a></li>
									<li><a href="https://marketplace.visualstudio.com/items?itemName=TabNine.tabnine-vscode">VS Code
											Tabnine Extension</a></li>
									<li>Chat GPT</li>
								</ul>


								<h3>2. Install the starting app</h3>

								<p>Please, clone and install the following repo and follow the installation instructions in the
									readme.md
									file:

								<pre><code class="language-github">https://</code></pre>

								Ensure that everything installed properly and you can run the app.

								If you would prefer to set up the app from scratch, follow the <a href="setup-instructions.html">setup
									instructions</a>.</p>
								<p>
								<h3>3. App Overview</h3>
								</p>
								<p>In this workshop, we'll create a back-end API of <b>'Fuber'</b>, a ride-sharing app clone, using a
									tech stack comprising
									<b>Express.js, Prisma/TypeScript, and PostgreSQL.</b>
								</p>

							</section>
							<section>
								<header>
									<ul class="dates">
										<li>
											<span class="date">Part <b>2.</b></span>
											<h2>Working With Prisma</h2>
										</li>
									</ul>
								</header>
								<p>

									Prisma is a modern <b>Object-Relational Mapping (ORM)</b> tool that simplifies database
									access and manipulation in web applications.



								<ul>
									<li><b>Add an abstraction layer</b> allowing you to interact with the databases inside your
										app using
										JavaScript with an object-oriented approach. You work with database entities as if they were
										JavaScript objects.</li>
									<li><b>Transforms database tables into JS objects.</b> Each table typically corresponds to a
										JavaScript class
										or object, and the rows in the table become instances of these classes or objects. </li>
									<li><b>Abstract the database the app is using.</b> An ORM tools abstract the underlying
										database system,
										making it possible to work with various databases </li>
								</ul>
								<p>
								<h3>1. Initialize The Data Model</h3>
								</p>
								<p>
									We'll use Prisma to model the Entity-Relationship Diagram (ERD) of our database.
								</p>

								<picture>
									Picture of the ERD here
								</picture>

								<p>
								<h4>a. Create the database</h4>
								</p>

								<p>Follow the <a href="setup-instructions.html#postgres">setup instructions</a> to create the database
									if you haven't already done so.</p>

								<p>
								<h4>b. Initialize Prisma</h4>
								</p>
								<p>Enter the following command in the terminal:</p>
								<p>
								<pre><code class="language-shell-session">npx prisma init</code></pre>
								</p>

								<p><b>npx prisma init</b> sets up the essential configuration and tools you need to work with
									Prisma in your
									project, including defining your data model, configuring your database connection, and generating the
									Prisma Client for database access.</p>

								<ul>
									<li>It creates a <b>schema.prisma file.</b> This file defines the data model for your
										application, including your database tables and their relationships.</li>

									<li>It prompts you to provide <b>database connection information</b>, such as
										the database URL. This information is saved in the <b>schema.prisma file.</b></li>

									<li>It creates a <b>migrations directory</b>. This directory will contain database
										migration files that Prisma generates when you make changes to your data model.</li>

									<li>It generates <b>Prisma Client</b> by inspecting your data model and database. Prisma
										Client is a type-safe database access library that allows you to interact with your database using
										TypeScript or JavaScript code.</li>
								</ul>

								<p>
									<picture>

										Add the folders picture here

									</picture>
								</p>

								<p>
								<h4>c. Add the Database Credentials</h4>
								</p>

								<p>Replace the corresponding values for <i>user</i>, <i>password</i>, and <i>database</i> in the
									database URL string located in the <b>.env file</b>.</p>

								<pre><code
										class="language-js">DATABASE_URL="postgresql://johndoe:randompassword@localhost:5432/mydb?schema=public"</code>
								</pre>


								<p>
								<h3>2. Create the Schema</h3>
								</p>

								<p>
									We'll use Prisma data modeling syntax to create our database schema
								</p>

								<pre><code class="language-js">model User {
										id Int @id @default(autoincrement())
										first_name String
										last_name String
										email String @unique
										password String
										area_code String
										phone_number String
										dob DateTime
										customers Customer[]
										created_at DateTime @default(now())
										updated_at DateTime @updatedAt
										drivers Driver[]

										@@map("users")
										}

										model Customer {
										id Int @id @default(autoincrement())
										user_id Int
										user User @relation(fields: [user_id], references: [id])
										trips Trip[]
										ratings Rating[]

										created_at DateTime @default(now())
										updated_at DateTime @updatedAt

										@@map("customers")
										}

										model Driver {
										id Int @id @default(autoincrement())
										location_lattitude Float
										location_longitude Float
										user_id Int
										user User @relation(fields: [user_id], references: [id])
										cabs Cab[]
										trips Trip[]
										ratings Rating[]
										created_at DateTime @default(now())
										updated_at DateTime @updatedAt

										@@map("drivers")
										}</code></pre>

								<p>
								<h4>a. Run the migration</h4>
								</p>

								<pre><code class="language shell-session">npx prisma migrate dev --name=initial</code></pre>

								<p>
								<h4>b. Exercise</h4>
								</p>

								<p>Complete the rest of the database schema and run the migration</p>

								<p>
								<h3>Create the seed files</h3>
								</p>

								<p>
								<h4>a. Create the <b>prisma/seeds</b> folder</h4>
								</p>

								<p>
								<h4>b. Create object files containing the data</h4>
								</p>

								<p>Let's create arrays of objects for each table in our database</p>

								<p>We can use Chat GPT to help with the data generation for our seeds. Ex:</p>

								<pre><code class="language-shell-session">generate an array containing 20 user objects containing the
										properties and values bases on the user model</code></pre>

								<p>Note: just insert the Prisma schema with the prompt</p>

								<ul>
									<li><b>prisma/seeds/users.ts</b> for user data</li>
									<li><b>prisma/seeds/customers.ts</b> for customer data</li>
									<li><b>prisma/seeds/drivers.ts</b> for driver data</li>
									<li><b>prisma/seeds/cabs.ts</b> for cab data</li>
									<li><b>prisma/seeds/trips.ts</b> for trip data</li>
									<li><b>prisma/seeds/payments.ts</b> for payment data</li>
									<li><b>prisma/seeds/ratings.ts</b> for rating data</li>

								</ul>

								<p>
								<h4>c. Create the file to run the seeds</h4>
								</p>

								<p>Create the <b>prisma/seeds/seeds.ts</b> file with the following content. Please refer to the <a
										href="https://www.prisma.io/docs/guides/migrate/seed-database">Prisma documentation</a> for
									instructions on how to run the seeds.

								<pre><code class="language-js">import { PrismaClient } from '@prisma/client';

										const prisma = new PrismaClient();

										async function main() {}

										main()
										.then(async () => {
										await prisma.$disconnect();
										})
										.catch(async (e) => {
										console.error(e);
										await prisma.$disconnect();
										process.exit(1);
										});
									</code></pre>

								<p>
								<h4>d. Add the following to package.json</h4>
								</p>

								<pre><code class="language-json"> "prisma": {
										"seed": "ts-node prisma/seeds/seeds.ts"
										},</code></pre>

								<p>Type the following command in your terminal to run the seeds:</p>

								<pre><code class="language-shell-session">npx prisma db seed</code></pre>

								<p>To reset the database (re-running migrations and seeding) type the following command:</p>

								<pre><code class="language-shell-session">npx prisma migrate reset</code></pre>

								<p>Or add the script to your <b>package.json</b> and run <b>npm run db:reset</b></p>

								<pre><code class="language-json"> "scripts": {
										"test": "echo \"Error: no test specified\" && exit 1",
										"start": "ts-node server.ts",
										"dev": "nodemon",
										"db:reset": "npx prisma migrate reset"
										}</code></pre>

								<p>
								<h4>e. Browse the Database</h4>
								</p>

								<p>Primsa Studio offers a convient visual interface for browsing the data present in the database. Start
									Prisma Studio in a new terminal window and type:</p>

								<pre><code class="language-shell-session">npx prisma studio</code></pre>

							</section>
						</article>

					</div>
				</div>
			</div>
		</section>

		<!-- Footer -->
		<section id="footer">
			<div class="container">
				<div class="row">
					<div class="col-8 col-12-medium">
						<section>
							<header>
								<h2>Blandit nisl adipiscing</h2>
							</header>
							<ul class="dates">
								<li>
									<span class="date">Jan <b>27</b></span>
									<h3><a href="#">Lorem dolor sit amet veroeros</a></h3>
									<p>Ipsum dolor sit amet veroeros consequat blandit ipsum phasellus lorem consequat etiam.</p>
								</li>
								<li>
									<span class="date">Jan <b>23</b></span>
									<h3><a href="#">Ipsum sed blandit nisl consequat</a></h3>
									<p>Blandit phasellus lorem ipsum dolor tempor sapien tortor hendrerit adipiscing feugiat lorem.</p>
								</li>
								<li>
									<span class="date">Jan <b>15</b></span>
									<h3><a href="#">Magna tempus lorem feugiat</a></h3>
									<p>Dolore consequat sed phasellus lorem sed etiam nullam dolor etiam sed amet sit consequat.</p>
								</li>
								<li>
									<span class="date">Jan <b>12</b></span>
									<h3><a href="#">Dolore tempus ipsum feugiat nulla</a></h3>
									<p>Feugiat lorem dolor sed nullam tempus lorem ipsum dolor sit amet nullam consequat.</p>
								</li>
								<li>
									<span class="date">Jan <b>10</b></span>
									<h3><a href="#">Blandit tempus aliquam?</a></h3>
									<p>Feugiat sed tempus blandit tempus adipiscing nisl lorem ipsum dolor sit amet dolore.</p>
								</li>
							</ul>
						</section>
					</div>
					<div class="col-4 col-12-medium">
						<section>
							<header>
								<h2>What's this all about?</h2>
							</header>
							<a href="#" class="image featured"><img src="images/pic10.jpg" alt="" /></a>
							<p>
								This is <b>Dopetrope</b> a free, fully responsive HTML5 site template by
								<a href="http://twitter.com/ajlkn">AJ</a> for <a href="http://html5up.net/">HTML5 UP</a> It's released
								for free under
								the <a href="http://html5up.net/license/">Creative Commons Attribution</a> license so feel free to use
								it for any personal or commercial project &ndash; just don't forget to credit us!
							</p>
							<footer>
								<ul class="actions">
									<li><a href="#" class="button">Find out more</a></li>
								</ul>
							</footer>
						</section>
					</div>
					<div class="col-4 col-6-medium col-12-small">
						<section>
							<header>
								<h2>Tempus consequat</h2>
							</header>
							<ul class="divided">
								<li><a href="#">Lorem ipsum dolor sit amet sit veroeros</a></li>
								<li><a href="#">Sed et blandit consequat sed tlorem blandit</a></li>
								<li><a href="#">Adipiscing feugiat phasellus sed tempus</a></li>
								<li><a href="#">Hendrerit tortor vitae mattis tempor sapien</a></li>
								<li><a href="#">Sem feugiat sapien id suscipit magna felis nec</a></li>
								<li><a href="#">Elit class aptent taciti sociosqu ad litora</a></li>
							</ul>
						</section>
					</div>
					<div class="col-4 col-6-medium col-12-small">
						<section>
							<header>
								<h2>Ipsum et phasellus</h2>
							</header>
							<ul class="divided">
								<li><a href="#">Lorem ipsum dolor sit amet sit veroeros</a></li>
								<li><a href="#">Sed et blandit consequat sed tlorem blandit</a></li>
								<li><a href="#">Adipiscing feugiat phasellus sed tempus</a></li>
								<li><a href="#">Hendrerit tortor vitae mattis tempor sapien</a></li>
								<li><a href="#">Sem feugiat sapien id suscipit magna felis nec</a></li>
								<li><a href="#">Elit class aptent taciti sociosqu ad litora</a></li>
							</ul>
						</section>
					</div>
					<div class="col-4 col-12-medium">
						<section>
							<header>
								<h2>Vitae tempor lorem</h2>
							</header>
							<ul class="social">
								<li><a class="icon brands fa-facebook-f" href="#"><span class="label">Facebook</span></a></li>
								<li><a class="icon brands fa-twitter" href="#"><span class="label">Twitter</span></a></li>
								<li><a class="icon brands fa-dribbble" href="#"><span class="label">Dribbble</span></a></li>
								<li><a class="icon brands fa-tumblr" href="#"><span class="label">Tumblr</span></a></li>
								<li><a class="icon brands fa-linkedin-in" href="#"><span class="label">LinkedIn</span></a></li>
							</ul>
							<ul class="contact">
								<li>
									<h3>Address</h3>
									<p>
										Untitled Incorporated<br />
										1234 Somewhere Road Suite<br />
										Nashville, TN 00000-0000
									</p>
								</li>
								<li>
									<h3>Mail</h3>
									<p><a href="#">someone@untitled.tld</a></p>
								</li>
								<li>
									<h3>Phone</h3>
									<p>(800) 000-0000</p>
								</li>
							</ul>
						</section>
					</div>
					<div class="col-12">

						<!-- Copyright -->
						<div id="copyright">
							<ul class="links">
								<li>&copy; Untitled. All rights reserved.</li>
								<li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
							</ul>
						</div>

					</div>
				</div>
			</div>
		</section>

	</div>

	<!-- Scripts -->
	<script src="assets/js/jquery.min.js"></script>
	<script src="assets/js/jquery.dropotron.min.js"></script>
	<script src="assets/js/browser.min.js"></script>
	<script src="assets/js/breakpoints.min.js"></script>
	<script src="assets/js/util.js"></script>
	<script src="assets/js/main.js"></script>

</body>

</html>